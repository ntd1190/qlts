function formatNumber(a) { return a.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,") } function closesosanh(a) { $("#" + a).remove(); var t = parseInt($("#Itemsosanh").val()), e = $("#textsearchsosanhh").val(), n = t - 1, o = "<div class='col-sm-3' id='inputsosanh'><input type='hidden' id='Itemsosanh' value='" + n + "' /><div class='product-compare product-compare-input'><div class='compare-input-icon'><i class='ehis-plus'></i></div><div class='search-suggestion'><input type='text' class='input' id='searchsosanh' placeholder='Nhập tên " + e + "'><div class='search-suggestion-wrapper clearfix' id='showcompare'></div></div></div></div>"; $("#inputsosanh").remove(), $("#sosanhid").append(o), $("#searchsosanh").keyup(function () { var a = $("#rootCategory").val(), t = $("#productId").val(); SearchCompare(a, $(this).val(), t) }) } function SearchCompare(a, t, e) { t.length > 1 ? ($("#showcompare").hide(), $("#loader_searchsosanh").show(), $.ajax({ type: "get", dataType: "json", url: "/api/searchcompare/" + a + "/" + t + "/" + e, success: function (a) { try { null != a ? ($("#showcompare").html(a), $("#showcompare").show(), $("#loader_searchsosanh").hide()) : $("#showcompare").html("Không có sản phẩm") } catch (a) { } } })) : $("#showcompare").html("") } function Clickcompare(a) { var t = $("#rootCategory").val(), e = $("#productId").val(), n = parseInt($("#Itemsosanh").val()), o = n + 1; $.ajax({ type: "get", dataType: "json", url: "api/getcompareproduct/" + t + "/" + a + "/" + e, success: function (a) { try { if ($("#sosanhid").append(a), o <= 3) { var t = "<div class='col-sm-3' id='inputsosanh'><input type='hidden' id='Itemsosanh' value='" + o + "' /><div class='product-compare product-compare-input'><div class='compare-input-icon'><i class='ehis-plus'></i></div><div class='search-suggestion'><input type='text' class='input' id='searchsosanh' placeholder='Nhập tên Điện thoại'><div class='search-suggestion-wrapper clearfix' id='showcompare'></div></div></div></div>"; $("#inputsosanh").remove(), $("#sosanhid").append(t), $("#searchsosanh").keyup(function () { var a = $("#rootCategory").val(), t = $("#productId").val(); SearchCompare(a, $(this).val(), t) }) } else { var t = "<div class='col-sm-3' id='inputsosanh'><input type='hidden' id='Itemsosanh' value='" + o + "' /><div class='product-compare product-compare-input'><div class='compare-input-icon'><i class='ehis-plus'></i></div><div class='search-suggestion'><input type='text' class='input' id='searchsosanh' placeholder='Nhập tên Điện thoại'><div class='search-suggestion-wrapper clearfix' id='showcompare'></div></div></div></div>"; $("#inputsosanh").remove(), $("#sosanhid").append(t), $("#searchsosanh").keyup(function () { var a = $("#rootCategory").val(), t = $("#productId").val(); SearchCompare(a, $(this).val(), t) }), $("#inputsosanh").hide() } } catch (a) { } } }) } function SearchCompare_3(a, t, e, n) { t.length > 1 ? ($("#showcompare_3").hide(), $("#loader_searchsosanh").show(), $.ajax({ type: "get", dataType: "json", url: "/api/searchcompare_3/" + a + "/" + t + "/" + e + "/" + n, success: function (a) { try { null != a ? ($("#showcompare_3").html(a), $("#showcompare_3").show(), $("#loader_searchsosanh").hide()) : $("#showcompare").html("Không có sản phẩm") } catch (a) { } } })) : $("#showcompare_3").html("") } function InvalidInput(a) { return $("#" + a).addClass("error"), $("#err-note").show(), $(".loading-pop-up").hide(), !1 } function LoadchinhanhHeader() { var a = ""; $.ajax({ type: "get", dataType: "json", url: "/api/getlistallbranch", success: function (t) { $.each(t.ListArea, function (e, n) { a += '<div data-location="mien-' + n.AreaId + '-v" class="sector-name">', a += "<a href=\"javascript:void(0);\" onclick=\"ga('send', 'event', { eventCategory: 'Chon cua hang " + n.AreaName + "', eventAction: 'Click " + n.AreaName + "', eventLabel: '" + n.AreaName + "'});\" >" + n.AreaName + "</a>", a += "</div>", a += '<ul class="clearlist scroll location-list sector" id="mien-' + n.AreaId + '-v">', $.each(t.ListCityBranch, function (e, o) { o.AreaId === n.AreaId && (a += '<li class="city">', a += o.Cityname, a += '<ul class="clearlist">', $.each(t.ListDistrictBranch, function (e, n) { n.CityId === o.Cityid && (a += '<li class="district">', a += n.Districtname, a += '      <ul class="clearlist">', $.each(t.ListBranchs, function (t, e) { if (e.Districtid === n.DistrictId) { var o = "onclick=\"ehisJsPC.main.CreateCookieBranch('" + e.BranchsCodePos + "','" + e.BranchsAdd + "','" + e.GroupId + "')\""; a += "<li>", a += '  <a href="javascript:void(0);" ' + o + ">", a += 4 === e.GroupId ? '<span class="icon-vbox"></span>' : '<span class="icon-ehis"></span>', a += e.BranchsShortAdd, a += "  </a>", a += " </li>" } }), a += " </ul>", a += "</li>") }), a += " </ul>", a += "</li>") }), a += "</ul>" }), $("#showbranch").html(a), $("#loaderbranch").hide(), $("#showbranch").show(); var e = $("#location-global").find(".location-list").children("li"), n = $("#location-global").find(".location-list").children("li").find("li"), o = $("#location-global").find(".dropdown-ehis-tabs").children("div"); o.click(function (a) { a.preventDefault(); var t = $(this), e = t.data("location"); t.hasClass("active") || (t.addClass("active").siblings().removeClass("active"), $("#location-global .location-list").hide(), $("#location-global #" + e).fadeIn(function () { $(".scroll").perfectScrollbar("update") })) }), e.click(function () { var a = $(this); a.hasClass("active") ? a.removeClass("active") : a.addClass("active").siblings().removeClass("active"), $(".scroll").perfectScrollbar("update") }), n.click(function (a) { var t = $(this); a.stopPropagation(), t.hasClass("active") || t.addClass("active").siblings().removeClass("active"), $(".scroll").perfectScrollbar("update") }); var r = $("#location-global .sector"), i = $("#location-global .city"), c = $("#location-global .district"), s = $(".location-list a"); $("#filter-s").keyup(function () { var a = locdau($(this).val()); delay(function () { s.each(function () { $this = $(this), $s_text = locdau($this.text()), $s_text.search(new RegExp(a, "i")) < 0 ? $this.fadeOut().addClass("not", function () { }) : $this.fadeIn().removeClass("not", function () { }) }), c.each(function () { $this = $(this), $this.find("a").not(".not").length > 0 ? $this.addClass("active").fadeIn() : $this.removeClass("active").fadeOut() }), i.each(function () { $this = $(this), $this.find(".district.active").length > 0 ? $this.addClass("active").fadeIn() : $this.removeClass("active").fadeOut() }), r.each(function () { $this = $(this), $this.find(".city.active").length > 0 ? $this.prev().removeClass("hidden") : $this.prev().addClass("hidden"), $(".sector-name").next().hide(), $(".sector-name").not(".hidden").first().next().show() }), num = $(".sector-name").length, $(".sector-name.hidden").length == num ? $(".dropdown-ehis-content").addClass("hethang") : $(".dropdown-ehis-content").removeClass("hethang"), "" == a && (c.each(function () { $this = $(this), $this.removeClass("active") }), i.each(function () { $this = $(this), $this.removeClass("active") }), $(".sector-name").next().hide()) }, 400) }) } }) } function strMessage(a) { for (var t = "", e = 0; e < a.length; e++) 13 === a.charCodeAt(e) && 10 === a.charCodeAt(e + 1) ? (e++, t += "<br>") : t += a.charAt(e); return t } function makerandom() { for (var a = "", t = "abcdefghijklmnopqrstuvwxyz0123456789", e = 0; e < 6; e++) a += t.charAt(Math.floor(Math.random() * t.length)); return a } var ehisJs = ehisJs || {}, ehisJsPC = ehisJsPC || {}, currentMaxPageHeight, lxTragop = 3.27, myPageScroll, homeCredit = [{ TraTruoc: [{ Value: 20, Name: "20%" }, { Value: 30, Name: "30%" }, { Value: 40, Name: "40%" }, { Value: 50, Name: "50%" }, { Value: 60, Name: "60%" }, { Value: 70, Name: "70%" }], ThoiHanVay: [{ Value: 6, Name: "6 tháng" }, { Value: 8, Name: "8 tháng" }, { Value: 9, Name: "9 tháng" }, { Value: 10, Name: "10 tháng" }, { Value: 12, Name: "12 tháng" }, { Value: 15, Name: "15 tháng" }, { Value: 18, Name: "18 tháng" }] }], acs = [{ TraTruoc: [{ Value: 10, Name: "10%" }, { Value: 20, Name: "20%" }, { Value: 30, Name: "30%" }, { Value: 40, Name: "40%" }, { Value: 50, Name: "50%" }, { Value: 60, Name: "60%" }, { Value: 70, Name: "70%" }], ThoiHanVay: [{ Value: 6, Name: "6 tháng" }, { Value: 9, Name: "9 tháng" }, { Value: 12, Name: "12 tháng" }, { Value: 15, Name: "15 tháng" }, { Value: 18, Name: "18 tháng" }] }], hdFinance = [{ TraTruoc: [{ Value: 10, Name: "10%" }, { Value: 20, Name: "20%" }, { Value: 30, Name: "30%" }, { Value: 40, Name: "40%" }, { Value: 50, Name: "50%" }, { Value: 60, Name: "60%" }, { Value: 70, Name: "70%" }], ThoiHanVay: [{ Value: 12, Name: "12 tháng" }, { Value: 15, Name: "15 tháng" }, { Value: 18, Name: "18 tháng" }, { Value: 24, Name: "24 tháng" }] }]; ehisJsPC.main = { AddPaymentPC: function (a, t, e) { var n = "ehisMobilePaymentCK"; Cookies.set(n, a + "|" + t + "|" + e), "TraGop" !== t ? ehisJsPC.main.AddCKHappyCare() : Cookies.set("ehisMobileHappyCareCK", "", { expires: -1 }), ga("send", "pageview", "/mua-online.html") }, AddPaymentMayDoiTraPC: function (a) { var t = "ehisMobilePaymentMayDoiTraCK"; Cookies.set(t, a) }, BindDataDropdown: function (a, t, e) { var n = $(t).val(); $("#CityName").val($(t).find("option:selected").text()), ehisJsPC.service.ListDistrictByCityId(n, e, function (t) { $("#" + a).html(""), $("#" + a).append($("<option />").attr("value", "0").text("===Chọn quận huyện===")), $(t).each(function () { var t = $("<option />"); t.attr("value", this.DistrictId).text(this.Districtname), $("#" + a).append(t) }) }) }, BindDataDropdownCity: function (a, t) { $("#" + a).html(""), ehisJsPC.service.ListCity(t, function (t) { $("#" + a).html(""), $("#" + a).append($("<option />").attr("value", "0").text("===Chọn thành phố===")), $(t).each(function () { var t = $("<option />"); t.attr("value", this.Cityid).text(this.Cityname), $("#" + a).append(t) }) }) }, BindDataDropdownBranch: function (a, t) { var e = $(t).val(); $("#DistrictName").val($(t).find("option:selected").text()), ehisJsPC.service.ListBranchByDistrictId(e, function (t) { $("#" + a).html(""), $("#" + a).append($("<option />").attr("value", "0").text("===Chọn chi nhánh===")), $(t).each(function () { var t = $("<option />"); t.attr("value", this.BranchsCodePos).text(this.BranchsAdd), $("#" + a).append(t) }) }) }, SetDistrictName: function (a) { $("#DistrictName").val($(a).find("option:selected").text()) }, AddCKHappyCare: function () { var a = $("#check_ghbh").is(":checked"), t = $("#check_bvtd").is(":checked"), e = "", n = ""; a && (e = "GHBH|" + $("#check_ghbh").val()), t && (n = "BVTD|" + $("#check_bvtd").val()), "" === e && "" === n || Cookies.set("ehisMobileHappyCareCK", e + "*" + n) }, FormatNumber: function (a, t, e, n) { a = (a + "").replace(/[^0-9+\-Ee.]/g, ""); var o = isFinite(+a) ? +a : 0, r = isFinite(+t) ? Math.abs(t) : 0, i = "undefined" == typeof n ? "." : n, c = "undefined" == typeof e ? "," : e, s = "", d = function (a, t) { var e = Math.pow(10, t); return "" + Math.round(a * e) / e }; return s = (r ? d(o, r) : "" + Math.round(o)).split("."), s[0].length > 3 && (s[0] = s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g, i)), (s[1] || "").length > r && (s[1] = s[1] || "", s[1] += new Array(r - s[1].length + 1).join("0")), s.join(c) }, AddName: function (a, t) { $("#" + a).val($(t).find("option:selected").text()) }, BindDataDropdownBranchId: function (a, t) { var e = $(t).val(); $("#DistrictName").val($(t).find("option:selected").text()), ehisJsPC.service.ListBranchByDistrictId(e, function (t) { $("#" + a).html(""), $("#" + a).append($("<option />").attr("value", "0").text("===Chọn chi nhánh===")), $(t).each(function () { var t = $("<option />"); t.attr("value", this.BranchsId), t.attr("storecode", this.BranchsCodePos), t.text(this.BranchsAdd), $("#" + a).append(t) }) }) }, CalcTraGop: function () { var a = $("input[name=DonViTraGop]:checked").val(), t = $("#ThoiGianTraGop_" + a).val(); $("#ThoiGianTraGop").val(t); var e = $("#PhanTramTraTruoc_" + a).val(); $("#PhanTramTraTruoc").val(e); var n = $("#TraGopType_" + a).val(); if ($("#LaiXuatDacBiet").val(n), void 0 != n && "-1" !== n) lxTragop = n; else switch (a) { case "ACS": lxTragop = 1.66; break; case "HDF": lxTragop = 3.27; break; case "PPF": lxTragop = 1.66 } var o = $("#totalPrice").val(), r = $("#PhanTramTraTruoc").val(), i = $("#ThoiGianTraGop").val(), c = 1e3 * Math.round(o * r / 100 / 1e3), s = o - c + (o - c) * lxTragop * i / 100, d = 1e3 * Math.round(s / (1e3 * i)); $("p[name=lblTraTruoc").text("0 đ"), $("p[name=lblTraThang").text("0 đ"), $("select[name=ddlPhanTramTraTruoc]").attr("disabled", "disabled"), $("#PhanTramTraTruoc_" + a).removeAttr("disabled"), $("select[name=ddlThoiGianTraGop]").attr("disabled", "disabled"), $("#ThoiGianTraGop_" + a).removeAttr("disabled"), $("select[name=ddlTraGopType]").attr("disabled", "disabled"), $("#TraGopType_" + a).removeAttr("disabled"), $("#currentTtruoc_" + a).text(ehisJsPC.main.FormatNumber(c) + " đ"), $("#currentGThang_" + a).text(ehisJsPC.main.FormatNumber(d) + " đ") }, BindDataDropdownSubCategory: function (a, t) { var e = $(t).val(); ehisJsPC.service.ListSubCategoryById(e, function (t) { $("#" + a).html(""), $("#" + a).append($("<option />").attr("value", "0").text("Chọn loại sản phẩm")), $(t).each(function () { var t = $("<option />"); t.attr("value", this.CategoryId).text(this.CategoryName), $("#" + a).append(t) }) }) }, BindDataDropdownProduct: function (a, t) { var e = $(t).val(); ehisJsPC.service.ListProductById(e, function (t) { $("#" + a).html(""), $("#" + a).append($("<option />").attr("value", "0").text("Chọn sản phẩm")), $(t).each(function () { var t = $("<option />"); t.attr("value", this.ProductId).text(this.ProductName), $("#" + a).append(t) }) }) }, CreateCookieBranch: function (a, t, e) { Cookies.set("ehisCookieMobile_CurrentBranch", a, { expires: 7 }), Cookies.set("ehisCookieMobile_CurrentBranchAddress", t, { expires: 7 }), Cookies.set("ehisCookieMobile_CurrentBranchGroupId", e, { expires: 7 }), ga("send", { hitType: "event", eventCategory: "pc_chon_chi_nhanh", eventAction: "click", eventLabel: a }); var n = window.location.origin + window.location.pathname; window.location.href = n + "?cn=" + a }, RegisterDatTruoc: function () { var a = $("#productId").val(), t = $("#popup-dattruoc input[name=ColorId]:checked").val(), e = $("#popup-dattruoc input[name=Gender]:checked").val(), n = $("#popup-dattruoc #FullName").val(), o = $("#popup-dattruoc #Email").val(), r = "", i = $("#popup-dattruoc #Phone").val(), c = $("#popup-dattruoc input[name=RecieveType]:checked").val(), s = $("#popup-dattruoc #CityName").val(), d = $("#popup-dattruoc #DistrictName").val(), l = "", u = "", h = "0", p = "0", v = "0", m = "107", f = $("#pre-price").val(), y = $("#popup-dattruoc input[name=ColorId]:checked").attr("data-codepos"), g = $("#product_code").val(), C = $("#productname").val(); "ehis" === c ? (l = $("#popup-dattruoc #AddressName").val() + "," + d + "," + s, u = "6") : (l = $("#popup-dattruoc #Address").val() + "," + d + "," + s, u = "8"); var b = $("#popup-dattruoc input[name=PaymentType]:checked").val(), T = $("#popup-dattruoc input[name=PaymentMethod]:checked").val(); if ("" === n) return $("#popup-dattruoc #FullName").addClass("error"), void $("#err-note-dattruoc").show(); if ("" === i) return $("#popup-dattruoc #Phone").addClass("error"), void $("#err-note-dattruoc").show(); var x = /\d{6,11}/; return x.test(i) ? void 0 == b ? ($("#popup-dattruoc #PaymentType").addClass("error"), void $("#err-note-dattruoc").show()) : "16" == b && void 0 == T ? ($("#popup-dattruoc #PaymentMethod").addClass("error"), void $("#err-note-dattruoc").show()) : void ehisJsPC.service.InsertDatTruoc(t, e, n, i, o, u, s, d, l, b, m, v, a, g, y, f, C, h, p, r, T, function (a) { a.Result ? ($.fancybox.close(), $.fancybox.open("#popup-dattruoc-success")) : ($.fancybox.close(), $.fancybox.open("#popup-dattruoc-fail")) }) : ($("#popup-dattruoc #Phone").addClass("error"), void $("#err-note-dattruoc").show()) }, SearchProduct: function () { window.location.href = "tim-kiem?q=" + $("#searchehis").val() } }, ehisJsPC.service = { ListDistrictByCityId: function (a, t, e) { var n = "/api/ehis/listdistrictbycity/" + a; void 0 != t && (n = n + "/" + t), $.ajax({ type: "get", dataType: "json", url: n, success: function (a) { "function" == typeof e && e(a) } }) }, ListBranchByDistrictId: function (a, t) { $.ajax({ type: "get", dataType: "json", url: "/api/ehis/listbranchbydistrict/" + a, success: function (a) { "function" == typeof t && t(a) } }) }, ListSubCategoryById: function (a, t) { $.ajax({ type: "get", dataType: "json", url: "api/ehis/listcategorymodeldatabyid/" + a, success: function (a) { "function" == typeof t && t(a) } }) }, ListProductById: function (a, t) { $.ajax({ type: "get", dataType: "json", url: "api/ehis/listproductmodelbyid/" + a, success: function (a) { "function" == typeof t && t(a) } }) }, GetProductDetailById: function (a, t, e) { $.ajax({ type: "get", dataType: "json", url: "api/ehis/getproductdetailbyid/" + a + "/" + t, success: function (a) { "function" == typeof e && e(a) } }) }, RenderMoreMayDoiTraProduct: function (a, t) { var e = $(a).attr("cateid"), n = $(a).attr("page"), o = $("#brand").val(), r = $("#price").val(), i = $("#branch").val(), c = $("#product_code").val(); $.ajax({ type: "post", dataType: "json", data: { productCode: c, price: r, cid: e, brand: o, branch: i, page: n }, url: "/api/loadmoremaydoitra", success: function (a) { "function" == typeof t && t(a) } }) }, LoadMoreKhuyenMaiProduct: function (a, t) { var e = $(a).attr("cateid"), n = $(a).attr("page"), o = $("#brand").val(), r = $("#price").val(), i = $("#branch").val(), c = $("#product_code").val(); $.ajax({ type: "post", dataType: "json", data: { productCode: c, price: r, cid: e, brand: o, branch: i, page: n }, url: "/api/loadmoremaydoitra", success: function (a) { "function" == typeof t && t(a) } }) }, RenderMoreXaHangProduct: function (a, t) { var e = $(a).attr("cateid"), n = $(a).attr("page"), o = $("#brand").val(), r = $("#price").val(), i = $("#branch").val(), c = $("#product_code").val(); $.ajax({ type: "post", dataType: "json", data: { productCode: c, price: r, cid: e, brand: o, branch: i, page: n }, url: "/api/loadmorexahang", success: function (a) { "function" == typeof t && t(a) } }) }, RenderMoreCategoryProduct: function (a, t) { var e = $(a).attr("cateid"), n = $(a).attr("page"), o = $(a).attr("suburl2"); $.ajax({ type: "get", dataType: "json", data: { subUrl_2: o }, url: "/api/loadmorecate/" + e + "/" + n, success: function (a) { "function" == typeof t && t(a) } }) }, GetProductsSearch: function (a) { return a.length < 2 || a.length > 50 ? void $(".searchContaint").html("") : (console.log("aaa"), void $.ajax({ type: "get", dataType: "json", url: "/api/searchproduct/" + a, success: function (a) { try { $(".searchContaint").html(ehisJs.main.createHtmSearchProductRespondV2(a)) } catch (a) { } } })) }, GetSearchSosanh: function (a, t) { }, ListCity: function (a, t) { var e = "/api/ehis/listcityapi"; void 0 != a && (e = e + "/" + a), $.ajax({ type: "get", dataType: "json", url: e, success: function (a) { "function" == typeof t && t(a) } }) }, InsertDatTruoc: function (a, t, e, n, o, r, i, c, s, d, l, u, h, p, v, m, f, y, g, C, b, T) { var x = window.location.href; $.ajax({ type: "post", dataType: "json", data: { Color: a, Gender: t, Name: e, Phone: n, Email: o, Shiping: r, City: i, District: c, Address: s, Payment: d, CampaignId: l, OrderShareId: u, Productid: h, Productcode: p, ProductColorcode: v, Price: m, Product: f, MaCombo: y, MotaCombo: g, Cmnd: C, CurrentUrl: x, PaymentMethod: b }, url: "https://publicapi.ehisgarden.vn/dattruoc-api/InsertRegister_V2", success: function (a) { "PAYMENTONLINE" == a.Data.PaymentType ? window.location.href = a.Data.RedirectUrl : "function" == typeof T && T(a) } }) }, RenderMoreSearchProduct: function (a, t) { var e = $(a).attr("page"), n = $("#keysearch").val(); $.ajax({ type: "get", data: { q: n, page: e }, url: "/search/LoadMoreProductSearch", success: function (a) { "function" == typeof t && t(a) } }) }, RenderMoreSearchNews: function (a, t) { var e = $(a).attr("page"), n = $("#keysearch").val(); $.ajax({ type: "get", data: { q: n, page: e }, url: "/search/LoadMoreNewsSearch", success: function (a) { "function" == typeof t && t(a) } }) }, RenderMoreCategory: function (a, t) { var e = $(a).attr("cateid"), n = $(a).attr("page"), o = $(a).attr("suburl2"), r = $(a).attr("suburl3"); $.ajax({ type: "get", data: { cateid: e, page: n, subUrl2: o, subUrl3: r }, url: "/Category/LoadMoreCate", success: function (a) { "function" == typeof t && t(a) } }) }, RenderMoreXaHang: function (a, t) { var e = $(a).attr("cateid"), n = $(a).attr("page"), o = $("#brand").val(), r = $("#price").val(), i = $("#branch").val(), c = $("#product_code").val(); $.ajax({ type: "post", data: { productCode: c, price: r, cid: e, brand: o, branch: i, page: n }, url: "/XaHang/LoadMoreXaHang", success: function (a) { "function" == typeof t && t(a) } }) }, RenderMoreXaHangDetail: function (a, t) { var e = $(a).attr("cateid"), n = $(a).attr("page"), o = $("#brand").val(), r = $("#price").val(), i = $("#branch").val(), c = $("#product_code").val(); $.ajax({ type: "post", data: { productCode: c, price: r, cid: e, brand: o, branch: i, page: n }, url: "/XaHang/LoadMoreXaHangDetail", success: function (a) { "function" == typeof t && t(a) } }) }, RenderMoreMayDoiTra: function (a, t) { var e = $(a).attr("cateid"), n = $(a).attr("page"), o = $("#brand").val(), r = $("#price").val(), i = $("#branch").val(), c = "0"; $.ajax({ type: "post", data: { productCode: c, price: r, cid: e, brand: o, branch: i, page: n }, url: "/MayDoiTra/LoadMoreMayDoiTra", success: function (a) { "function" == typeof t && t(a) } }) }, RenderMoreMayDoiTraForModel: function (a, t) { var e = $(a).attr("cateid"), n = $(a).attr("page"), o = $("#brand").val(), r = $("#price").val(), i = $("#branch").val(), c = $("#product_code").val(); $.ajax({ type: "post", data: { productCode: c, price: r, cid: e, brand: o, branch: i, page: n }, url: "/MayDoiTra/LoadMoreMayDoiTraForModel", success: function (a) { "function" == typeof t && t(a) } }) }, RenderMoreMayDoiTraNew: function (a, t) { var e = $(a).attr("cateid"), n = $(a).attr("page"), o = $("#brand").val(), r = $("#price").val(), i = $("#branch").val(), c = $("#type").val(), s = "0"; $.ajax({ type: "post", data: { productCode: s, price: r, cid: e, brand: o, branch: i, page: n, type: c }, url: "/MayDoiTra/LoadMoreMayDoiTraNew", success: function (a) { "function" == typeof t && t(a) } }) }, RenderMoreMayDoiTraForModelNew: function (a, t) { var e = $(a).attr("cateid"), n = $(a).attr("page"), o = $("#brand").val(), r = $("#price").val(), i = $("#branch").val(), c = $("#type").val(), s = $("#product_code").val(); $.ajax({ type: "post", data: { productCode: s, price: r, cid: e, brand: o, branch: i, page: n, type: c }, url: "/MayDoiTra/LoadMoreMayDoiTraForModelNew", success: function (a) { "function" == typeof t && t(a) } }) }, RenderThuongHieu: function (a, t) { var e = $("#doanhmucSelect").val(); $.ajax({ type: "post", data: { parentId: e }, url: "/XaHang/LoadThuongHieu", success: function (a) { "function" == typeof t && t(a) } }) } }, ehisJs.main = { formartCurrency: function (a, t) { return t + " " + a.toFixed(2).replace(/./g, function (a, t, e) { return t > 0 && "." !== a && (e.length - t) % 3 === 0 ? "," + a : a }) }, createHtmSearchProductRespond: function (a) { if ("{}" === JSON.stringify(a) || 0 === a.length) return "<li ><span class='no-result'>Không tìm thấy kết quả nào!!!</span></li>"; var t = ""; return a.forEach(function (a) { try { var e = a.price, n = "<sup>đ<sup>"; 0 === e ? (e = "[Liên hệ]", n = "") : e = ehisJs.main.formartCurrency(a.price, "").replace(".00", ""), t = t + '<li><a href="' + a.fullurl + '" rel="external" data-ajax="false"><div class="quicks-image"><img alt="" src="' + a.cdn_image_path + '" class="img-responsive"></div><div class="quicks-content"><span class="quicks-product-name">' + a.product + '</span><span class="quicks-product-price">' + e + n + " </span></div></a></li>" } catch (a) { } }), t }, createHtmSearchProductRespondV2: function (a) { if ("{}" === JSON.stringify(a) || 0 === a.length) return "<li ><span class='no-result'>Không tìm thấy kết quả nào!!!</span></li>"; var t = ""; return a.forEach(function (a) { try { var e = a.ProductPrice; e = "-1đ" === e ? "[Liên hệ]" : a.ProductPrice, t = t + '<li><a href="' + a.ProductUrl + '" rel="external" data-ajax="false"><div class="quicks-image"><img alt="" src="' + a.ImageUrl + '" class="img-responsive"></div><div class="quicks-content"><span class="quicks-product-name">' + a.ProductName + '</span><span class="quicks-product-price">' + e + " </span></div></a></li>" } catch (a) { } }), t }, createHtmSearchSosanhRespond: function (a) { if ("{}" === JSON.stringify(a) || 0 === a.length) return "<li ><span class='no-result'>Không tìm thấy kết quả nào!!!</span></li>"; var t = ""; return a.forEach(function (a) { try { t += '<li><a href="" rel="external" data-ajax="false"> asdf</a></li>' } catch (a) { } }), t }, ShowSeletedBranchWhenPostBack: function () { try { var a = Cookies.get("ehisCookieMobile_CurrentBranch"); if (void 0 != a && "CS_0000042" !== a) { var t = Cookies.get("ehisCookieMobile_CurrentBranchAddress"); $(".dropdown-ehis-search").html(t) } } catch (a) { } }, createFullBranchsTreeHtml: function (a, t, e) { var n = ""; return void 0 === a || void 0 === t ? null : ($.each(t, function (t, e) { n = n + '<div data-role="collapsible" class="left-menu-city-collapse" ><h4 class="h4-city">' + e.CityName + "</h4>" + ehisJs.main.createHtmlNodeDistrictAndBranchs(e.CityId, a) + "</div>" }), n) }, createHtmlNodeDistrictAndBranchs: function (a, t) { var e = "", n = ehisJs.main.getListDistrictIdByCity(a, t); return n.length <= 0 ? null : ($.each(n, function (n, o) { var r = ehisJs.main.getListBranchIdByCity(a, o.id, t); return r.length > 0 ? void (e = e + '<div id="city-' + o.id + '" data-role="collapsible" class="left-menu-district-collapse" ><h4 class="h4-district"><span > &diams; </span>' + o.name + "</h4>" + ehisJs.main.createHtmlListBranch(r, t) + "</div>") : null }), e) }, getListDistrictIdByCity: function (a, t) { var e = []; return $.each(t, function (t, n) { if (a === n.CityId) try { var o = !1; $.each(e, function (a, t) { try { t.id === n.DistrictId && (o = !0) } catch (a) { } }), o !== !0 && e.push({ id: n.DistrictId, name: n.DistrictName }) } catch (a) { } }), e }, getListBranchIdByCity: function (a, t, e) { var n = []; return $.each(e, function (e, o) { a === o.CityId && t == o.DistrictId && n.push(o.BranchId) }), n }, createHtmlListBranch: function (a, t) { var e = '<div id="wrap-branch-ul">'; return e += '<ul class="ul-branchList" data-role="listview" data-inset="true" data-collapsed="true">', $.each(a, function (a, n) { $.each(t, function (a, t) { if (t.BranchId === n) { var o = "'" + t.BranchCodePos + "'"; e = e + '<li  class="li-branchItem"><span onclick="ehisJs.main.CreateCookieBranch(' + o + ",'" + t.BranchAdress + '\');" id="branch-' + t.BranchCodePos + '" class="span-branch"> &bull; ' + t.BranchAdress + "</span></li>" } }) }), e += "</ul></div>" }, BindDataDropdownBranchId: function (a, t) { var e = $(t).val(); $("#DistrictName").val($(t).find("option:selected").text()), ehisJs.service.ListBranchByDistrictId(e, function (t) { $("#" + a).html(""), $("#" + a).append($("<option />").attr("value", "0").text("===Chọn chi nhánh===")), $(t).each(function () { var t = $("<option />"); t.attr("value", this.BranchsId).text(this.BranchsAdd), $("#" + a).append(t) }) }) }, RegisterTraiNghiem: function () { var a = $("#productId").val(), t = $(".info-trainghiem #FullName").val(), e = $(".info-trainghiem #Phone").val(), n = "CS_0000004", o = $("#Date").val(), r = $("#Time").val(), i = r.split("|")[0], c = r.split("|")[1]; if ("" === t) return $(".info-trainghiem #FullName").addClass("error-input-text"), void $("#err-note").show(); if ("" === e) return $(".info-trainghiem #Phone").addClass("error-input-text"), void $("#err-note").show(); var s = /\d{6,11}/; return s.test(e) ? "" === o ? ($("#Date").addClass("error-input-text"), void $("#err-note").show()) : "" === r ? ($("#Date").addClass("error-input-text"), void $("#err-note").show()) : void ehisJs.service.InsertTraiNghiem(a, t, e, n, o, i, c, function (a) { a.Data ? (alert("Chúc mừng bạn đăng ký trải nghiệm thành công"), $("#err-note").hide(), $("#range-trainghiem").hide()) : alert("Đăng ký trải nghiệm that bại. Vui long thử lại!!!") }) : ($(".info-trainghiem #Phone").addClass("error-input-text"), void $("#err-note").show()) }, CreateCookieBranch: function (a, t) { Cookies.set("ehisCookieMobile_CurrentBranch", a, { expires: 7 }), Cookies.set("ehisCookieMobile_CurrentBranchAddress", t, { expires: 7 }), ga("send", { hitType: "event", eventCategory: "pc_chon_chi_nhanh", eventAction: "click", eventLabel: a }); var e = window.location.origin + window.location.pathname; window.location.href = e + "?cn=" + a }, BindDataDropdown: function (a, t) { var e = $(t).val(); $("#CityName").val($(t).find("option:selected").text()), ehisJs.service.ListDistrictByCityId(e, function (t) { $("#" + a).html(""), $("#" + a).append($("<option />").attr("value", "0").text("===Chọn quận huyện===")), $(t).each(function () { var t = $("<option />"); t.attr("value", this.DistrictId).text(this.Districtname), $("#" + a).append(t) }) }) }, BindDataDropdownBranch: function (a, t) { var e = $(t).val(); $("#DistrictName").val($(t).find("option:selected").text()), ehisJs.service.ListBranchByDistrictId(e, function (t) { $("#" + a).html(""), $("#" + a).append($("<option />").attr("value", "0").text("===Chọn chi nhánh===")), $(t).each(function () { var t = $("<option />"); t.attr("value", this.BranchsCodePos).text(this.BranchsAdd), $("#" + a).append(t) }) }) }, SetDistrictName: function (a) { $("#DistrictName").val($(a).find("option:selected").text()) }, AddCKHappyCare: function () { var a = $("#check_ghbh").is(":checked"), t = $("#check_bvtd").is(":checked"), e = "", n = ""; a && (e = "GHBH|" + $("#check_ghbh").val()), t && (n = "BVTD|" + $("#check_bvtd").val()), "" == e && "" == n || Cookies.set("ehisMobileHappyCareCK", e + "*" + n) }, ShowSeletedBranchWhenPostBack: function () { try { var a = Cookies.get("ehisCookieMobile_CurrentBranch"); if (void 0 != a && "CS_0000042" !== a) { var t = Cookies.get("ehisCookieMobile_CurrentBranchAddress"), e = Cookies.get("ehisCookieMobile_CurrentBranchGroupId"), n = "icon-ehis"; "2" === e && (n = "icon-vbox"), $(".location-global-form").html('<div class="location-dropdown-icon"><i class="ehis-arrow-down"></i></div><span class="' + n + '"></span>  ' + t) } } catch (a) { } }, FormatNumber: function (a, t, e, n) { a = (a + "").replace(/[^0-9+\-Ee.]/g, ""); var o = isFinite(+a) ? +a : 0, r = isFinite(+t) ? Math.abs(t) : 0, i = "undefined" == typeof n ? "," : n, c = "undefined" == typeof e ? "." : e, s = "", d = function (a, t) { var e = Math.pow(10, t); return "" + Math.round(a * e) / e }; return s = (r ? d(o, r) : "" + Math.round(o)).split("."), s[0].length > 3 && (s[0] = s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g, i)), (s[1] || "").length > r && (s[1] = s[1] || "", s[1] += new Array(r - s[1].length + 1).join("0")), s.join(c) } }, ehisJs.service = { GetProductsSearch: function (a) { return a.length < 2 || a.length > 50 ? void $(".searchContaint").html("") : void $.ajax({ type: "get", dataType: "json", url: "/api/searchproduct/" + a, success: function (a) { try { $(".searchContaint").html(ehisJs.main.createHtmSearchProductRespond(a)) } catch (a) { } } }) }, GetSearchSosanh: function (a, t) { }, InsertTraiNghiem: function (a, t, e, n, o, r, i, c) { $.ajax({ type: "post", dataType: "json", data: { ProductId: a, FullName: t, Phone: e, StoreCode: n, Date: o, TimeFrom: r, TimeTo: i }, url: "/api/ehis/inserttrainghiem", success: function (a) { "function" == typeof c && c(a) } }) }, InsertComment: function (a, t, e, n, o, r) { $.ajax({ type: "post", dataType: "json", data: { fullname: a, email: t, commnet: e, productId: n, score: o }, url: "/api/ehis/insertcomment", success: function (a) { "function" == typeof r && r(a) } }) }, RenderMoreCategoryProduct: function (a, t) { var e = $(a).attr("cateid"), n = $(a).attr("page"), o = $(a).attr("suburl2"); $.ajax({ type: "get", dataType: "json", data: { subUrl_2: o }, url: "/api/loadmorecate/" + e + "/" + n, success: function (a) { "function" == typeof t && t(a) } }) }, RenderMoreXaHangProduct: function (a, t) { var e = $(a).attr("cateid"), n = $(a).attr("page"), o = $("#brand").val(), r = $("#price").val(), i = $("#branch").val(), c = $("#product_code").val(); $.ajax({ type: "post", dataType: "json", data: { productCode: c, price: r, cid: e, brand: o, branch: i, page: n }, url: "/api/loadmorexahang/", success: function (a) { "function" == typeof t && t(a) } }) }, RenderMoreMayDoiTraProduct: function (a, t) { var e = $(a).attr("cateid"), n = $(a).attr("page"), o = $("#brand").val(), r = $("#price").val(), i = $("#branch").val(), c = $("#product_code").val(); $.ajax({ type: "post", dataType: "json", data: { productCode: c, price: r, cid: e, brand: o, branch: i, page: n }, url: "/api/loadmoremaydoitra", success: function (a) { "function" == typeof t && t(a) } }) }, RenderInsertComment: function (a, t) { var e = $(a).attr("cateid"), n = $(a).attr("page"), o = $("#brand").val(), r = $("#price").val(), i = $("#branch").val(), c = $("#product_code").val(); $.ajax({ type: "post", dataType: "json", data: { productCode: c, price: r, cid: e, brand: o, branch: i, page: n }, url: "/api/loadmoremaydoitra/", success: function (a) { "function" == typeof t && t(a) } }) } }, $(document).on("pageinit", function () { $.mobile.ajaxEnabled = !1 }), $(document).on("mobileinit", function () { $.mobile.ajaxEnabled = !1 }), $(function () {
    $('img[src*="insight.adsrvr.org"]').hide(), ehisJs.main.ShowSeletedBranchWhenPostBack(), $("#search-branch-txt").on("click", function () { $(".menu_search_chinhanh").addClass("menu_search_chinhanh_click"), $("#categry-product-list").hide(), $("#wrap-all-root-branchs").show(), $(".back-search-branch").show() }), $(".back-search-branch").bind("click", function () { $(".menu_search_chinhanh").removeClass("menu_search_chinhanh_click"), $(this).hide(), $("#categry-product-list").show(), $("#wrap-all-root-branchs").hide() }), $(".location-global-style .dropdown-ehis-clear").bind("click", function () { Cookies.set("ehisCookieMobile_CurrentBranch", "", { expires: -1 }), Cookies.set("ehisCookieMobile_CurrentBranchAddress", "", { expires: -1 }), $(".location-global-form").html("<div class='location-dropdown-icon'><i class='ehis-arrow-down'></i></div><span class='location-icon'><i class='ehis-location'></i></span> Chọn chi nhánh để xem giá và khuyến mãi"), window.location.href = window.location.origin + window.location.pathname }), $("#btn-trainghiem").on("click", function () { $("#btn-trainghiem").hide(), $(".desc-trainghiem").hide(), $(".info-trainghiem").slideDown() }), $(".search-global .input-search").keyup(function (a) { console.log("bbbb"), window._fbq.push(["track", "Search"]), ehisJsPC.service.GetProductsSearch($(this).val()) }), $(document).mouseup(function (a) { var t = $(".search-global"); t.is(a.target) || 0 !== t.has(a.target).length ? t.find(".searchContaint").addClass("visible").removeClass("hidden") : t.find(".searchContaint").addClass("hidden").removeClass("visible") }), $("#search_sosanh").keyup(function () { var a = $("#productId").val(); ehisJsPC.service.GetSearchSosanh(a, $(this).val()) }), $("#col-sm-6").mouseout(function () { }), $("#searchDialog").bind({ popupafterclose: function (a, t) { $("#main-page").removeClass("fixbody") } }), $("#searchDialog").bind({ popupafteropen: function (a, t) { $("#main-page").addClass("fixbody") } }), $("input[name=PaymentType]").change(function () { "21" === $(this).val() ? $("#payment-online-range").slideDown() : $("#payment-online-range").slideUp() }), $("#chkCoupon").change(function () {
        this.checked ? $("#chkCoupon-range").slideDown() : $("#chkCoupon-range").slideUp();
    }), $("#IsVat").change(function () { this.checked ? $("#vat-range").slideDown() : $("#vat-range").slideUp() }), $("#searchehis").keypress(function (a) { 13 == a.which && (window.location.href = "tim-kiem?q=" + $("#searchehis").val()) }), $("input[name=RecieveType]").change(function () { "ehis" === this.value ? ($("#StoreCode").show(), $("#Address").hide(), ehisJsPC.main.BindDataDropdownCity("CityId", !0), $("#DistrictId").html(""), $("#DistrictId").append($("<option />").attr("value", "0").text("===Chọn quận huyện===")), $("#StoreCode").html(""), $("#StoreCode").append($("<option />").attr("value", "0").text("===Chọn chi nhánh===")), $("#CityId").attr("haveStore", "true")) : ($("#StoreCode").hide(), $("#Address").show(), ehisJsPC.main.BindDataDropdownCity("CityId", !1), $("#DistrictId").html(""), $("#DistrictId").append($("<option />").attr("value", "0").text("===Chọn quận huyện===")), $("#CityId").attr("haveStore", "false")) }), $("#CategoryPager").on("click", function () { $(".loader").show(), $("#CategoryPager").hide(); var a = $("#CategoryPager").attr("page"), t = parseInt($("#lblNumCont").text()); ehisJsPC.service.RenderMoreCategory(this, function (e) { var n = $(e); $("#cateProductContent").append(n).masonry("appended", n), $(".loader").hide(), $("#CategoryPager").show(), t - 30 <= 0 ? $("#CategoryPager").hide() : ($("#CategoryPager").attr("page", parseInt(a) + 1), $("#lblNumCont").text(t - 30)) }) }); var a = 220, t = 1e3; jQuery(window).scroll(function () { jQuery(this).scrollTop() > a ? jQuery(".back-to-top").fadeIn(t) : jQuery(".back-to-top").fadeOut(t) }), jQuery(".back-to-top").click(function (a) { return a.preventDefault(), jQuery("html, body").animate({ scrollTop: 0 }, t), !1 })
}), $("#searchsosanh").keyup(function () { var a = $("#rootCategory").val(), t = $("#productId").val(); SearchCompare(a, $(this).val(), t) }), $("#searchsosanh_3").keyup(function () { var a = $("#rootCategory").val(), t = $("#productId").val(), e = $("#productIdS").val(); SearchCompare_3(a, $(this).val(), t, e) });